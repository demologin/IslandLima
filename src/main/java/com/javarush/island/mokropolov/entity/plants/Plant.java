package com.javarush.island.mokropolov.entity.plants;import com.javarush.island.mokropolov.entity.Entity;import com.javarush.island.mokropolov.game.EntityPrefs;import com.javarush.island.mokropolov.game.map.Cell;import java.util.Set;public class Plant extends Entity {    public Plant(EntityPrefs entityPrefs) {        super(entityPrefs);    }    @Override    public boolean multiply(Cell cell) {        Cell neighborCell = cell.getNextCell(1);        return safePlantPropagation(neighborCell);    }    private boolean safePlantPropagation(Cell cell) {        cell.getLock().lock();        try {            this.safeChangeWeight(cell, 75);            Set<Entity> plants = cell.getCellsEntities().get(getType());            if (plants.size() < getMaxCount()&&                    getWeight() > (getMaxWeight() / 5)            ) {                    Entity newPlant = Entity.clone(this);                    double childWeight = getWeight() / 2;                    newPlant.setWeight(childWeight);                    plants.add(newPlant);            }        } finally {            cell.getLock().unlock();        }        return false;    }}